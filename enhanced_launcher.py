#!/usr/bin/env python3
"""
ğŸš€ Enhanced MCP Server Launcher
Ğ—Ğ°Ğ¿ÑƒÑĞº Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ½Ğ¾Ğ¹ Ğ²ĞµÑ€ÑĞ¸Ğ¸ Ğ°Ğ²Ñ‚Ğ¾Ğ½Ğ¾Ğ¼Ğ½Ğ¾Ğ³Ğ¾ MCP ÑĞµÑ€Ğ²ĞµÑ€Ğ° Ñ AI Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ¼
"""

import os
import sys
import threading
import time
import tkinter as tk
from tkinter import messagebox
import logging
from pathlib import Path

# Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ Ñ‚ĞµĞºÑƒÑ‰ÑƒÑ Ğ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ² Ğ¿ÑƒÑ‚ÑŒ
current_dir = Path(__file__).parent
sys.path.insert(0, str(current_dir))

def setup_environment():
    """ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ"""
    directories = ['data', 'logs', 'checkpoints', 'config', 'backups', 'tools', 'cache']
    
    for directory in directories:
        os.makedirs(directory, exist_ok=True)
    
    logging.basicConfig(
        level=logging.INFO,
        format='%(asctime)s - %(levelname)s - %(name)s - %(message)s',
        handlers=[
            logging.FileHandler('logs/enhanced_server.log'),
            logging.StreamHandler()
        ]
    )

def check_dependencies():
    """ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ĞµĞ¹"""
    required_modules = ['psutil', 'requests', 'sqlite3', 'tkinter']
    missing_modules = []
    
    for module in required_modules:
        try:
            __import__(module)
        except ImportError:
            missing_modules.append(module)
    
    if missing_modules:
        print(f"âŒ ĞÑ‚ÑÑƒÑ‚ÑÑ‚Ğ²ÑƒÑÑ‚ Ğ¼Ğ¾Ğ´ÑƒĞ»Ğ¸: {', '.join(missing_modules)}")
        print("ğŸ“¦ Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚Ğµ Ğ¸Ñ… ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ¾Ğ¹: pip install " + ' '.join(missing_modules))
        return False
    
    return True

def show_startup_banner():
    """ĞÑ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ ÑÑ‚Ğ°Ñ€Ñ‚Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ±Ğ°Ğ½Ğ½ĞµÑ€Ğ°"""
    banner = """
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                              â•‘
â•‘        ğŸ¤– ENHANCED AUTONOMOUS MCP SERVER v2.0               â•‘
â•‘                                                              â•‘
â•‘  âœ¨ Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ½Ğ°Ñ Ğ²ĞµÑ€ÑĞ¸Ñ Ñ AI Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ¼ Ğ¸ ÑĞ°Ğ¼Ğ¾Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸ĞµĞ¼         â•‘
â•‘                                                              â•‘
â•‘  ğŸ¯ ĞĞ¾Ğ²Ñ‹Ğµ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸:                                       â•‘
â•‘     â€¢ âš™ï¸  Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑĞ°Ğ¼Ğ¸                              â•‘
â•‘     â€¢ ğŸŒ ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ ÑĞµÑ‚Ğ¸                                    â•‘
â•‘     â€¢ ğŸ’¾ ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ñ€ĞµĞ·ĞµÑ€Ğ²Ğ½Ğ¾Ğµ ĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ               â•‘
â•‘     â€¢ ğŸ“Š ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸                      â•‘
â•‘     â€¢ ğŸ“‹ ĞŸĞ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ñ‰Ğ¸Ğº Ğ·Ğ°Ğ´Ğ°Ñ‡                                  â•‘
â•‘     â€¢ ğŸ” Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ°ÑƒĞ´Ğ¸Ñ‚Ğ° Ğ¸ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ                       â•‘
â•‘     â€¢ ğŸ§  Ğ˜Ğ˜-Ğ°Ğ³ĞµĞ½Ñ‚ Ñ ÑĞ°Ğ¼Ğ¾Ğ¼Ğ¾Ğ´Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸ĞµĞ¹                        â•‘
â•‘     â€¢ ğŸ¨ Ğ¡Ğ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ³Ñ€Ğ°Ñ„Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ                  â•‘
â•‘                                                              â•‘
â•‘  âš ï¸  Ğ’ĞĞ–ĞĞ: Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ Ñ Ğ¾ÑÑ‚Ğ¾Ñ€Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒÑ!                    â•‘
â•‘     Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ¸Ğ¼ĞµĞµÑ‚ Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ½Ñ‹Ğµ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ        â•‘
â•‘                                                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
"""
    print(banner)

def main():
    """Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°"""
    try:
        show_startup_banner()
        
        print("ğŸ” ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹...")
        setup_environment()
        
        if not check_dependencies():
            input("ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ Enter Ğ´Ğ»Ñ Ğ²Ñ‹Ñ…Ğ¾Ğ´Ğ°...")
            return
        
        print("âœ… Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ° Ğº Ğ·Ğ°Ğ¿ÑƒÑĞºÑƒ!")
        print("ğŸš€ Ğ—Ğ°Ğ¿ÑƒÑĞº Enhanced MCP Server...")
        
        # ĞŸÑ€Ğ¾ÑÑ‚Ğ¾Ğ¹ GUI Ğ´Ğ»Ñ Ğ´ĞµĞ¼Ğ¾Ğ½ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸
        root = tk.Tk()
        root.title("ğŸ¤– Enhanced MCP Server v2.0")
        root.geometry("600x400")
        root.configure(bg='#1a1a1a')
        
        label = tk.Label(root, text="ğŸ¤– Enhanced MCP Server v2.0\n\nâœ… Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ·Ğ°Ğ¿ÑƒÑ‰ĞµĞ½Ğ°!\n\nğŸ“ Ğ—Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚Ğµ Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ğµ Ğ¼Ğ¾Ğ´ÑƒĞ»Ğ¸ Ğ´Ğ»Ñ Ğ²ÑĞµÑ… Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¹", 
                        bg='#1a1a1a', fg='#ffffff', font=('Arial', 14), justify='center')
        label.pack(expand=True)
        
        root.mainloop()
        
    except Exception as e:
        print(f"âŒ ĞÑˆĞ¸Ğ±ĞºĞ°: {e}")
        input("ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ Enter Ğ´Ğ»Ñ Ğ²Ñ‹Ñ…Ğ¾Ğ´Ğ°...")

if __name__ == "__main__":
    main()